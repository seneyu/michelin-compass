(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9159)}])},9159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(4848),n=s(6540);let r=e=>{let{restaurant:t}=e,[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(0),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{o.current&&l(s?o.current.scrollHeight:0)},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{r(!s)},className:"other-buttons rounded-md bg-slate-800 py-2 px-4 border border-transparent text-center text-sm text-white transition-all shadow-md hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",children:s?"Hide Details":"Show Details"})," ",(0,a.jsx)("div",{className:"mt-2 overflow-hidden transition-all duration-300 ease-in-out",style:{height:"".concat(i,"px"),opacity:s?1:0},children:(0,a.jsxs)("div",{ref:o,className:"p-2",children:[(0,a.jsx)("b",{children:"MICHELIN Guideâ€™s Point Of View: "}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{className:"text-slate-600 font-light",children:t.description})]})})]})},i=e=>{let{restaurant:t,onRestaurantClick:s}=e,n=[];for(let e=0;e<t.distinction;e++)n.push((0,a.jsx)("img",{src:"https://cdn1.iconfinder.com/data/icons/christmas-flat-4/58/019_-_Star-128.png",alt:"star-icon",className:"icon-star"},e));return(0,a.jsxs)("div",{className:"restaurant-card",children:[(0,a.jsx)("h4",{onClick:()=>s(t.latitude,t.longitude),children:(0,a.jsxs)("b",{children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)("br",{}),t.name]})}),(0,a.jsx)("p",{children:t.address}),(0,a.jsx)("p",{children:t.cuisine}),(0,a.jsx)("br",{}),(0,a.jsx)("a",{onClick:()=>window.open(t.website),children:"Visit Official Website"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(r,{restaurant:t})]})},l=e=>{let{restaurants:t,fetchError:s,onRestaurantClick:n}=e;return(0,a.jsxs)("div",{children:[s&&(0,a.jsx)("p",{children:s}),t&&(0,a.jsx)("div",{className:"restaurants",children:(0,a.jsx)("div",{className:"restaurant-grid",children:t.map(e=>(0,a.jsx)(i,{restaurant:e,onRestaurantClick:n},e._id))})})]})};var o=s(4550),c=s(7836);let d=()=>{let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)([]),[i,d]=(0,n.useState)([]),[u,h]=(0,n.useState)({lat:38.5789380221926,lng:-121.50225113309448}),p=c.env.GOOGLE_MAPS_API_KEY;return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/restaurants");if(!e.ok)throw Error("Network response was not ok.");let t=await e.json();console.log("data: ",t),r(t)}catch(e){t("Could not fetch the restaurants"),r([]),console.error("Fetch error: ",e)}})()},[]),(0,n.useEffect)(()=>{s.length>0&&d(s.map(e=>({position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},key:e.name})))},[s]),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)(l,{restaurants:s,fetchError:e,onRestaurantClick:(e,t)=>{h({lat:parseFloat(e),lng:parseFloat(t)})}}),p&&(0,a.jsx)(o.c4,{apiKey:p,children:(0,a.jsx)(o.T5,{className:"map-container",defaultZoom:13,center:u,children:i.map((e,t)=>(0,a.jsx)(o.pH,{position:e.position,title:e.key},t))})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[550,636,593,792],()=>t(2022)),_N_E=e.O()}]);