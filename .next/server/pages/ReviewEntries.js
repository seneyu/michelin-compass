(()=>{var e={};e.id=108,e.ids=[108,220,636],e.modules={671:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2717:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>b,default:()=>j,getServerSideProps:()=>w,getStaticPaths:()=>v,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>_,unstable_getServerProps:()=>A,unstable_getServerSideProps:()=>E,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>S});var s={};r.r(s),r.d(s,{default:()=>g});var n=r(3865),a=r(9455),i=r(671),o=r(5583),l=r(6868),c=r(8732),d=r(2015),u=r(6271);let h=({restaurants:e,review:t,onClose:r,onSubmit:s})=>(0,c.jsx)("div",{className:"modal-overlay",onClick:r,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"Update a Review"}),(0,c.jsx)("br",{}),(0,c.jsx)(u.A,{review:t,onSubmit:e=>{s(t._id,e),r()},restaurants:e})]}),(0,c.jsx)("button",{onClick:r,children:"Close"})]})}),m=({restaurants:e,reviews:t,onDeleteSubmit:r,onUpdateSubmit:s})=>{let[n,a]=(0,d.useState)(!1),[i,o]=(0,d.useState)(null),l=e=>{o(e),a(!0)},u=async e=>{try{await r(e)}catch(e){e instanceof Error&&alert(`Error: ${e.message}`),console.error("An error occurred when deleting the post: ",e)}};return(0,c.jsxs)("div",{className:"reviewCards",children:[t.map(e=>(0,c.jsxs)("div",{className:"review",children:[(0,c.jsxs)("p",{children:["Restaurant: ",e.restaurant]}),(0,c.jsxs)("p",{children:["Rating: ",e.rating]}),(0,c.jsxs)("p",{children:["Comment: ",e.comment]}),(0,c.jsxs)("p",{children:["Created At: ",e.createdAt]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{className:"other-buttons",onClick:()=>l(e),children:"Update"}),(0,c.jsx)("button",{className:"other-buttons",onClick:()=>u(e._id),children:"Delete"})]})]},e._id)),n&&i&&(0,c.jsx)(h,{restaurants:e,review:i,onClose:()=>a(!1),onSubmit:s})]})},p=({restaurants:e,onClose:t,onReviewSubmit:r})=>(0,c.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"Write a Review"}),(0,c.jsx)("br",{}),(0,c.jsx)(u.A,{restaurants:e,onSubmit:e=>{r(e)}})]}),(0,c.jsx)("button",{onClick:t,children:"Close"})]})}),g=({restaurants:e})=>{let[t,r]=(0,d.useState)([]),[s,n]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/reviews");if(!e.ok)throw Error(`HTTP error! Status: ${e.status}`);let t=(await e.json()).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());r(t)}catch(e){console.error("An error occurred when fetching data: ",e)}})()},[]);let a=async e=>{try{let t=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw alert("Please login."),Error(`HTTP error! Status: ${t.status}`);let s=await t.json();s&&(r(e=>[s,...e].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),n(!1))}catch(e){console.error("An error occurred when posting review: ",e)}},i=async(e,t)=>{try{let s=await fetch(`/api/reviews/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw alert("Please login."),Error(`HTTP error! Status: ${s.status}`);let n=await s.json();r(e=>e.map(e=>e._id===n._id?n:e)),console.log("Post updated successfully!")}catch(e){console.error("An error occurred when updating post: ",e)}},o=async e=>{try{let t=await fetch(`/api/reviews/${e}`,{method:"DELETE"});if(!t.ok)throw alert("Please login."),Error(`HTTP error! Status: ${t.status}`);let s=await t.json();r(e=>e.map(e=>e._id===s._id?s:e)),console.log("Review deleted successfully!")}catch(e){console.error("An error occurred when deleting a review post: ",e)}};return(0,c.jsxs)("div",{className:"pages",children:[(0,c.jsx)("h3",{children:"Reviews"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{className:"other-buttons",onClick:()=>n(!0),children:"+ Add Review"}),s&&(0,c.jsx)(p,{restaurants:e,onClose:()=>n(!1),onReviewSubmit:a})]}),(0,c.jsx)(m,{restaurants:e,reviews:t,onDeleteSubmit:o,onUpdateSubmit:i})]})},j=(0,i.M)(s,"default"),x=(0,i.M)(s,"getStaticProps"),v=(0,i.M)(s,"getStaticPaths"),w=(0,i.M)(s,"getServerSideProps"),b=(0,i.M)(s,"config"),f=(0,i.M)(s,"reportWebVitals"),S=(0,i.M)(s,"unstable_getStaticProps"),P=(0,i.M)(s,"unstable_getStaticPaths"),y=(0,i.M)(s,"unstable_getStaticParams"),A=(0,i.M)(s,"unstable_getServerProps"),E=(0,i.M)(s,"unstable_getServerSideProps"),_=new n.PagesRouteModule({definition:{kind:a.A.PAGES,page:"/ReviewEntries",pathname:"/ReviewEntries",bundlePath:"",filename:""},components:{App:l.default,Document:o.default},userland:s})},6271:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(8732),n=r(2015);let a=({restaurants:e,review:t,onSubmit:r})=>{let[a,i]=(0,n.useState)(e[0].name),[o,l]=(0,n.useState)(1),[c,d]=(0,n.useState)("");return(0,n.useEffect)(()=>{t&&(i(t.restaurant?.toString()||""),l(t.rating?.valueOf()||1),d(t.comment?.toString()||""))},[t]),(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{r({restaurant:a,rating:o,comment:c}),i(""),l(1),d("")}catch(e){e instanceof Error&&alert(`Error: ${e.message}`),console.error("An error occurred when posting review: ",e)}},children:[(0,s.jsx)("label",{htmlFor:"review-restaurant",children:"Review a Restaurant: "}),(0,s.jsx)("select",{id:"review-restaurant",name:"review-restaurant",value:a,onChange:e=>i(e.target.value),children:e&&e.length>0?e.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e._id.toString())):(0,s.jsx)("option",{value:"",disabled:!0,children:"No restaurants available"})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{htmlFor:"review-rating",children:"Select your rating: "}),(0,s.jsxs)("select",{id:"review-rating",name:"review-rating",value:o,onChange:e=>l(Number(e.target.value)),children:[(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"3",children:"3"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"5",children:"5"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{htmlFor:"review-comment",children:"Leave a Comment: "}),(0,s.jsx)("textarea",{id:"review-comment",name:"review-comment",value:c,onChange:e=>d(e.target.value)}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{className:"submit-buttons",type:"submit",children:"Post Review"})]})})}},6868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(8732),n=r(2015),a=r(1106),i=r.n(a);let o=({isAuthenticated:e,onLogout:t})=>(0,s.jsxs)("div",{className:"nav-bar",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(i(),{href:"/",style:{textDecoration:"none"},children:[(0,s.jsx)("img",{src:"https://cdn1.iconfinder.com/data/icons/landmark-79/64/mont_saint_michel-island-landmark-france-town-normandy-travel-128.png",id:"logo"})," ",(0,s.jsx)("span",{id:"logo-title",children:"Michelin Compass"})]})}),(0,s.jsx)("div",{className:"auth",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{href:"/entries",children:(0,s.jsx)("button",{className:"other-buttons",children:"Reviews"})}),(0,s.jsx)("button",{id:"logout-button",onClick:t,children:"Logout"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{href:"/entries",children:(0,s.jsx)("button",{className:"other-buttons",children:"Reviews"})}),(0,s.jsx)(i(),{href:"/login",children:(0,s.jsx)("button",{className:"other-buttons",children:"Login"})}),(0,s.jsx)(i(),{href:"/signup",children:(0,s.jsx)("button",{id:"signup-button",children:"Signup"})})]})})]});r(3651);let l=({Component:e,pageProps:t})=>{let[r,a]=(0,n.useState)(!1),i=async()=>{try{(await fetch("/api/logout",{method:"POST",credentials:"include"})).ok&&a(!1)}catch(e){console.error("An error occurred when logging out user: ",e)}};return(0,s.jsxs)("div",{className:"main",children:[(0,s.jsx)(o,{isAuthenticated:r,onLogout:i}),(0,s.jsx)(e,{...t,onLogin:()=>{a(!0)}})]})}},5583:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8732),n=r(883);let a=()=>(0,s.jsxs)(n.Html,{children:[(0,s.jsxs)(n.Head,{children:[(0,s.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Petrona:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Playwrite+SK:wght@100..400&display=swap"})]}),(0,s.jsxs)("body",{children:[(0,s.jsx)(n.Main,{}),(0,s.jsx)(n.NextScript,{})]})]})},3651:()=>{},9455:(e,t)=>{"use strict";var r;Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(r||(r={}))},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:e=>{"use strict";e.exports=require("react")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},3873:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[916,883,106],()=>r(2717));module.exports=s})();